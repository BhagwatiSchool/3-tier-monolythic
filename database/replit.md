# Resource Management Dashboard - 3-Tier Azure Architecture

## Overview
Resource management dashboard converted to 3-tier architecture for Azure deployment with Python FastAPI backend and Azure SQL Database. No more Supabase/PostgreSQL - pure Azure Stack!

## Architecture
```
Frontend (React/Vite)  â†’  Backend (FastAPI/Python)  â†’  Azure SQL Database
Static HTML/CSS/JS        REST API (port 8000)         (ritserver.database.windows.net)
```

## Project Structure
```
/
â”œâ”€â”€ client/                    # Frontend - React 18 + Vite + TypeScript
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/       # Shadcn UI components
â”‚   â”‚   â”œâ”€â”€ pages/            # Page components
â”‚   â”‚   â”œâ”€â”€ contexts/         # React contexts (Auth, etc)
â”‚   â”‚   â”œâ”€â”€ hooks/            # Custom hooks
â”‚   â”‚   â”œâ”€â”€ lib/              # API client, utilities
â”‚   â”‚   â””â”€â”€ integrations/     # Third-party integrations
â”‚   â”œâ”€â”€ public/               # Static assets
â”‚   â””â”€â”€ vite.config.ts        # Vite configuration
â”‚
â”œâ”€â”€ backend/                  # Backend - Python FastAPI
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py          # FastAPI app + routes
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â””â”€â”€ config.py    # Settings (Azure SQL credentials)
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py      # Authentication endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ users.py     # User management
â”‚   â”‚   â”‚   â””â”€â”€ theme.py     # Theme configuration
â”‚   â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”‚   â”œâ”€â”€ database.py  # SQLAlchemy setup
â”‚   â”‚   â”‚   â””â”€â”€ models.py    # Database models
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ jwt.py       # JWT utilities
â”‚   â”œâ”€â”€ requirements.txt      # Python dependencies
â”‚   â”œâ”€â”€ run.py               # Development server entry
â”‚   â””â”€â”€ .env                 # Azure SQL credentials
â”‚
â””â”€â”€ docs/                     # Deployment guides
    â”œâ”€â”€ DEPLOYMENT_GUIDE.md   # Step-by-step Azure deployment
    â””â”€â”€ MIGRATION_SUMMARY.md  # Lovable â†’ Azure migration details
```

## âœ… Completion Status

### Frontend
- âœ… React 18 + TypeScript + Vite
- âœ… Removed Supabase dependencies
- âœ… Updated API client to call Python backend
- âœ… Auth context updated for JWT
- âœ… Ready to build and deploy

### Backend (Python FastAPI)
- âœ… **LIVE on localhost:8000**
- âœ… Connected to Azure SQL Database (ritserver)
- âœ… JWT Authentication implemented
- âœ… User management endpoints
- âœ… Theme configuration endpoints
- âœ… Auto-creates database tables on startup
- âœ… CORS configured for frontend

### Database
- âœ… Azure SQL Database created (ritserver.database.windows.net)
- âœ… Schema auto-generated by SQLAlchemy
- âœ… Tables: users, user_profiles, user_roles, theme_configurations

## ğŸ§ª Testing Endpoints

```bash
# Health check
curl http://localhost:8000/health
# Response: {"status":"healthy"}

# Root endpoint
curl http://localhost:8000/
# Response: {"message":"Resource Management API is running"}

# API docs (interactive)
http://localhost:8000/docs
```

## ğŸš€ Running Locally

### Backend (Python)
```bash
cd backend
python -m venv venv
venv\Scripts\activate  # Windows
pip install -r requirements.txt
python run.py
# Server runs on http://localhost:8000
```

### Frontend (React)
```bash
npm install
npm run dev
# Server runs on http://localhost:5000
```

## ğŸ“Š Tech Stack
**Frontend:**
- React 18, TypeScript, Vite
- Shadcn UI, Tailwind CSS
- React Router, React Query
- Axios for API calls

**Backend:**
- Python 3.11
- FastAPI + Uvicorn
- SQLAlchemy ORM
- PyMSSQL (Azure SQL driver)

**Database:**
- Azure SQL Database
- Auto-migrations via SQLAlchemy

## ğŸ” Credentials (Local Testing)
```
Server: ritserver.database.windows.net
Database: ritserver
Username: ritserver@ritserver
Password: Ritesh@12345
```

## ğŸ“ Next Steps for Production

1. **Deploy Backend to Azure VM:**
   - Create Windows/Linux VM in Azure
   - Install Python 3.11
   - Copy backend folder
   - Run: `pip install -r requirements.txt && python run.py`

2. **Deploy Frontend to Azure VM:**
   - Build: `npm run build`
   - Serve `client/dist/` with Nginx or IIS

3. **Network Configuration:**
   - Open port 8000 (backend) on VM security group
   - Update frontend API URL to backend VM IP
   - Configure Azure SQL firewall to allow VM access

4. **Optional: Use Azure App Services**
   - Backend: App Service (Python runtime)
   - Frontend: Static Web Apps
   - Database: Managed Azure SQL

## âš ï¸ Important Notes
- Azure SQL credentials are hardcoded in `backend/app/core/config.py` for simplicity
- For production: Use Azure Key Vault for secret management
- CORS is configured for localhost - update for production URLs
- JWT SECRET_KEY should be changed before production deployment
